% MongoDB 101 Lab
% Mongoose/Nodejs, Mokoversity.com
% 2014/02/20

# Use Schema

* Data Model Design, http://docs.mongodb.org/manual/core/data-model-design/

~~~~~~~~
var userSchema = new mongoose.Schema({
    name: { type: String, default: ''},
    phone: String,
    email: String,
    address: String,
    age: { type: Number, default: 0 }
});
~~~~~~~~

# Save New Document

* db.collection.save(), http://docs.mongodb.org/manual/reference/method/db.collection.save/

~~~~~~~~
    var model = req.app.db.model;

    var person = {
        name: req.query.name,
        phone: req.query.phone,
        email: req.query.email,
        address: req.query.address,
        age: req.query.age
    };

    var card = new model(person);
    card.save();
~~~~~~~~

# Aggregation

* http://docs.mongodb.org/manual/core/aggregation-introduction/

* Aggregation Pipeline
* Aggregation Operator
    * $project - projection

# Insert or Save

* If the document does not contain an *_id* field, then the *save()* method performs an insert. 

* During the operation, the shell will create an *ObjectID* and assign it to the *_id* field.